(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{42882:function(e,t,o){Promise.resolve().then(o.t.bind(o,64671,23)),Promise.resolve().then(o.bind(o,5889)),Promise.resolve().then(o.t.bind(o,53054,23))},5889:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return l},a:function(){return s}});var r=o(57437),a=o(2265);let n=(0,a.createContext)(),l=e=>{let{children:t}=e,[o,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{l(JSON.parse(t))}catch(e){console.error("Failed to parse stored user data",e),localStorage.removeItem("token"),localStorage.removeItem("user")}c(!1)},[]);let i=async(e,t)=>{try{let o=await fetch("https://agendamento-azure.vercel.app/cliente/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,senha:t})});if(!o.ok){let e=await o.json();console.error(e.message),c(!1);return}let{token:r,user:a}=await o.json();localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),l(a),window.location.href="http://localhost:3000/home",c(!1)}catch(e){console.error("Failed to login",e),c(!1)}};return(0,r.jsx)(n.Provider,{value:{user:o,login:i,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),l(null),window.location.href="http://localhost:3000/"},loading:s},children:t})},s=()=>(0,a.useContext)(n)},53054:function(){},64671:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(e){e.O(0,[93,971,23,744],function(){return e(e.s=42882)}),_N_E=e.O()}]);