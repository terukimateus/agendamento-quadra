(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{71845:function(e,t,l){Promise.resolve().then(l.bind(l,71193))},5889:function(e,t,l){"use strict";l.d(t,{AuthProvider:function(){return n},a:function(){return s}});var r=l(57437),a=l(2265);let o=(0,a.createContext)(),n=e=>{let{children:t}=e,[l,n]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{n(JSON.parse(t))}catch(e){console.error("Failed to parse stored user data",e),localStorage.removeItem("token"),localStorage.removeItem("user")}c(!1)},[]);let u=async(e,t)=>{try{let l=await fetch("https://agendamento-azure.vercel.app/cliente/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,senha:t})});if(!l.ok){let e=await l.json();console.error(e.message),c(!1);return}let{token:r,user:a}=await l.json();localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),n(a),window.location.href="http://localhost:3000/home",c(!1)}catch(e){console.error("Failed to login",e),c(!1)}};return(0,r.jsx)(o.Provider,{value:{user:l,login:u,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),window.location.href="http://localhost:3000/"},loading:s},children:t})},s=()=>(0,a.useContext)(o)},71193:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var r=l(57437),a=l(87138),o=l(2265),n=l(5889);function s(){let[e,t]=(0,o.useState)(""),[l,s]=(0,o.useState)(""),{login:c}=(0,n.a)();return(0,o.useEffect)(()=>{let e=document.querySelector('input[type="email"]'),l=document.querySelector('input[type="password"]');e&&l&&(t(e.value),s(l.value))},[]),(0,r.jsx)("div",{className:"w-full h-screen flex items-center justify-center flex-col py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-10 flex-col md:flex-col w-10/12 h-full md:w-5/12",children:[(0,r.jsxs)("div",{className:"flex w-full flex-col md:flex-row md:text-start text-center justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Agendamento de Quadras"}),(0,r.jsx)("span",{children:"Entre na sua conta!"})]}),(0,r.jsx)("div",{className:"flex flex-col md:w-6/12 ",children:(0,r.jsxs)("form",{className:"flex flex-col gap-3",onSubmit:t=>{t.preventDefault(),console.log(e,l),c(e,l)},children:[(0,r.jsx)("input",{className:"border border-1 border-neutral-400 p-4",type:"email",placeholder:"E-mail",value:e,onChange:e=>t(e.target.value),required:!0}),(0,r.jsx)("input",{className:"border border-1 border-neutral-400 p-4",type:"password",placeholder:"Sua senha",value:l,onChange:e=>s(e.target.value),required:!0}),(0,r.jsx)("button",{className:"w-full py-3 bg-emerald-400 rounded-xl hover:scale-105 duration-500",type:"submit",children:"Login"})]})})]}),(0,r.jsx)(a.default,{className:"text-slate-700",href:"/signup",children:"Ainda n\xe3o tem uma conta? Crie aqui!"})]})})}}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=71845)}),_N_E=e.O()}]);